{"version":3,"sources":["opencode/ui/github.cljs"],"mappings":";AAIA,0BAAA,1BAAKA;AAEL,wCAAA,xCAAMC;AAAN,AACE,IAAMC,OAAK,AAAA,oFAAA,AAAAC,gBAAQC;AAAnB,AACE,iNAAA,2CAAA,2DAAA,WAAAC,3TAACE,mDAAI,yBAAA,xBAAKP,oFAAqBE;AAA/B,AACgB,wGAAA,yDAAAG,1JAACG,mDAAMJ,8BAASK;GADhC,uEAAA,WAAAH;AAAA,AAEsB,qBAAA,SAAAA,vBAACI;;;AAE3B,qCAAA,rCAAMC;AAAN,AACE,IAAMT,OAAK,AAAA,oFAAA,AAAAC,gBAAQC;AAAnB,AACE,8MAAA,2CAAA,2DAAA,WAAAQ,xTAACL,mDAAI,yBAAA,xBAAKP,iFAAkBE;AAA5B,AACgB,wGAAA,mDAAAU,pJAACJ,mDAAMJ,8BAASK;GADhC,uEAAA,WAAAI;AAAA,AAEsB,qBAAA,MAAAA,pBAACH;;;AAE3B,2CAAA,3CAAMI,8FAAkBC;AAAxB,AACE,IAAMb,OAAK,AAAA,oFAAA,AAAAC,gBAAQC;AAAnB,AACE,6JAAA,2CAAA,wDAAA,2CAAA,2DAAA,4EAAA,0DAAA,qDAAA,2DAAA,WAAAY,hmBAACE,oDAAK,yBAAA,xBAAKlB,qSACWE,4DAAYa;AADlC,AAGiB,0CAAA,2CAAA,qDAAA,oEAAA,mDAAA,6DAAA,qDAAAC,5WAACG;GAHlB,uEAAA,WAAAF;AAAA,AAIuB,0CAAA,2CAAA,qDAAA,0EAAA,mDAAA,6DAAA,oDAAAA,jXAACE;;;AAE5B,mCAAA,nCAAMC,8EAAUL;AAAhB,AACE,IAAMb,OAAK,AAAA,oFAAA,AAAAC,gBAAQC;AAAnB,AACE,yJAAA,2CAAA,wDAAA,2CAAA,2DAAA,4EAAA,0DAAA,qDAAA,2DAAA,WAAAiB,5lBAACH,oDAAK,yBAAA,xBAAKlB,iSACWE,4DAAYa;AADlC,AAGiB,0CAAA,2CAAA,qDAAA,oEAAA,mDAAA,0DAAA,qDAAAM,zWAACF;GAHlB,uEAAA,WAAAG;AAAA,AAIuB,0CAAA,2CAAA,qDAAA,0EAAA,mDAAA,0DAAA,oDAAAA,9WAACH;;;AAE5B,yCAAA,iDAAAI,1FAAMI;AAAN,AAAA,IAAAH,YAAAD;IAAAC,gBAAA,AAAAC,4BAAAD;WAAA,AAAAE,4CAAAF,cAAA,jEAA8BtB;gBAA9B,AAAAwB,4CAAAF,cAAA,tEAAmCI;WAAnC,AAAAF,4CAAAF,cAAA,jEAA6CK;AAA7C,AACE,8JAAA,2CAAA,wDAAA,2CAAA,2DAAA,2DAAA,mEAAA,0DAAA,qDAAA,2DAAA,WAAAC,npBAACZ,oDAAK,yBAAA,xBAAKlB,sSACWE,sDAAS0B,gEAAgBC;AAD/C,AAGiB,0CAAA,2CAAA,qDAAA,oEAAA,mDAAA,kEAAA,qDAAAC,jXAACX;GAHlB,uEAAA,WAAAY;AAAA,AAIuB,0CAAA,2CAAA,qDAAA,0EAAA,mDAAA,kEAAA,oDAAAA,tXAACZ","names":["opencode.ui.github/base","opencode.ui.github/fetch-issues!","repo","cljs.core/deref","opencode.ui.state/!state","p1__9502#","p1__9503#","ajax.core.GET","cljs.core.swap_BANG_","cljs.core/assoc","js/console.error","opencode.ui.github/fetch-prs!","p1__9511#","p1__9512#","opencode.ui.github/create-worktree!","issue-number","p1__9520#","p1__9521#","ajax.core.POST","opencode.ui.state/push-event!","opencode.ui.github/open-pr!","p1__9523#","p1__9524#","p__9527","map__9529","cljs.core/--destructure-map","cljs.core.get","opencode.ui.github/reply-comment!","pr-number","body","p1__9525#","p1__9526#"],"sourcesContent":["(ns opencode.ui.github\n  (:require [ajax.core :refer [GET POST]]\n            [opencode.ui.state :as S]))\n\n(def base \"/api\")\n\n(defn fetch-issues! []\n  (let [repo (:repo @S/!state)]\n    (GET (str base \"/issues?repo=\" repo)\n         {:handler #(swap! S/!state assoc :issues %)\n          :error-handler #(js/console.error \"issues\" %)})))\n\n(defn fetch-prs! []\n  (let [repo (:repo @S/!state)]\n    (GET (str base \"/prs?repo=\" repo)\n         {:handler #(swap! S/!state assoc :prs %)\n          :error-handler #(js/console.error \"prs\" %)})))\n\n(defn create-worktree! [issue-number]\n  (let [repo (:repo @S/!state)]\n    (POST (str base \"/worktrees\")\n          {:params {:repo repo :issue issue-number}\n           :format :json\n           :handler #(S/push-event! {:type :ui/command-ok :cmd :worktree :data %})\n           :error-handler #(S/push-event! {:type :ui/command-error :cmd :worktree :err %})})))\n\n(defn open-pr! [issue-number]\n  (let [repo (:repo @S/!state)]\n    (POST (str base \"/pulls\")\n          {:params {:repo repo :issue issue-number}\n           :format :json\n           :handler #(S/push-event! {:type :ui/command-ok :cmd :pr-open :data %})\n           :error-handler #(S/push-event! {:type :ui/command-error :cmd :pr-open :err %})})))\n\n(defn reply-comment! [{:keys [repo pr-number body]}]\n  (POST (str base \"/pr-comment\")\n        {:params {:repo repo :pr pr-number :body body}\n         :format :json\n         :handler #(S/push-event! {:type :ui/command-ok :cmd :pr-comment :data %})\n         :error-handler #(S/push-event! {:type :ui/command-error :cmd :pr-comment :err %})}))"]}